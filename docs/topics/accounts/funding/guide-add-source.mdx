---
title: Add a funding source
---

# Add a funding source

Add a funding source with the API.

:::tip Prerequisites
Adding a funding source is a [sensitive operation](../../users/consent/index.mdx#sensitive), so you must call the mutation with a user access token associated with the account holder who will sign the direct debit mandate (the debtor).
They must consent to the operation.

Account members with `canManageAccountMembership` and `canViewAccount` permissions can add funding sources, in addition to the account holder.
However, the non-Swan account must belong to the Swan account holder.
:::

## Guide {#guide}

1. Call the `addDirectDebitFundingSource` mutation.
1. Choose the `SepaDirectDebitB2b` scheme. Though `Core` is an option in the API, it's not actually available for account funding.
1. Add your `accountId`, `iban`, `consentRedirectUrl`, and a `name` for your funding source (name is primarily for your reference).
1. Add the `AddDirectDebitFundingSourceSuccessPayload` success payload.
1. Add the consent URL to the success payload: `fundingSource` > `DirectDebitFundingSource` > `paymentMandate` > `SEPAPaymentDirectDebitMandate` > `statusInfo` > `PaymentMandateConsentPendingStatusInfo` > `consent` > `consentUrl`.
1. Add the `mandateDocumentUrl` to the payload (line 29).
1. Add rejections (not shown).

## Mutation {#mutation}

ðŸ”Ž [Open the mutation in API Explorer](https://explorer.swan.io?query=bXV0YXRpb24gQWRkU2RkQjJiIHsKICBhZGREaXJlY3REZWJpdEZ1bmRpbmdTb3VyY2UoCiAgICBpbnB1dDogewogICAgICBzY2hlbWU6IFNlcGFEaXJlY3REZWJpdEIyYgogICAgICBhY2NvdW50SWQ6ICIkWU9VUl9BQ0NPVU5UX0lEIgogICAgICBpYmFuOiAiJFlPVVJfSUJBTiIKICAgICAgY29uc2VudFJlZGlyZWN0VXJsOiAiJFlPVVJfUkVESVJFQ1RfVVJMIgogICAgICBuYW1lOiAiWW91ciBmdW5kaW5nIHNvdXJjZSBuYW1lIgogICAgfQogICkgewogICAgLi4uIG9uIEFkZERpcmVjdERlYml0RnVuZGluZ1NvdXJjZVN1Y2Nlc3NQYXlsb2FkIHsKICAgICAgX190eXBlbmFtZQogICAgICBmdW5kaW5nU291cmNlIHsKICAgICAgICAuLi4gb24gRGlyZWN0RGViaXRGdW5kaW5nU291cmNlIHsKICAgICAgICAgIGlkCiAgICAgICAgICBuYW1lCiAgICAgICAgICBwYXltZW50TWFuZGF0ZSB7CiAgICAgICAgICAgIC4uLiBvbiBTRVBBUGF5bWVudERpcmVjdERlYml0TWFuZGF0ZSB7CiAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICBuYW1lCiAgICAgICAgICAgICAgc3RhdHVzSW5mbyB7CiAgICAgICAgICAgICAgICAuLi4gb24gUGF5bWVudE1hbmRhdGVDb25zZW50UGVuZGluZ1N0YXR1c0luZm8gewogICAgICAgICAgICAgICAgICBfX3R5cGVuYW1lCiAgICAgICAgICAgICAgICAgIGNvbnNlbnQgewogICAgICAgICAgICAgICAgICAgIGNvbnNlbnRVcmwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBtYW5kYXRlRG9jdW1lbnRVcmwKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLi4uIG9uIEZvcmJpZGRlblJlamVjdGlvbiB7CiAgICAgIF9fdHlwZW5hbWUKICAgICAgbWVzc2FnZQogICAgfQogICAgLi4uIG9uIE5vdEZvdW5kUmVqZWN0aW9uIHsKICAgICAgaWQKICAgICAgbWVzc2FnZQogICAgfQogICAgLi4uIG9uIEFjY291bnRWZXJpZmljYXRpb25BbHJlYWR5UmVqZWN0ZWRSZWplY3Rpb24gewogICAgICBfX3R5cGVuYW1lCiAgICAgIG1lc3NhZ2UKICAgIH0KICAgIC4uLiBvbiBJQkFOTm90UmVhY2hhYmxlUmVqZWN0aW9uIHsKICAgICAgX190eXBlbmFtZQogICAgICBtZXNzYWdlCiAgICB9CiAgICAuLi4gb24gVmFsaWRhdGlvblJlamVjdGlvbiB7CiAgICAgIF9fdHlwZW5hbWUKICAgICAgbWVzc2FnZQogICAgICBmaWVsZHMgewogICAgICAgIGNvZGUKICAgICAgICBtZXNzYWdlCiAgICAgICAgcGF0aAogICAgICB9CiAgICB9CiAgfQp9Cg%3D%3D&tab=api)

```graphql {4,11,25,29} showLineNumbers
mutation AddSddB2b {
  addDirectDebitFundingSource(
    input: {
      scheme: SepaDirectDebitB2b
      accountId: "$YOUR_ACCOUNT_ID"
      iban: "$YOUR_IBAN"
      consentRedirectUrl: "$YOUR_REDIRECT_URL"
      name: "$YOUR_FUNDING_SOURCE_NAME"
    }
  ) {
    ... on AddDirectDebitFundingSourceSuccessPayload {
      __typename
      fundingSource {
        ... on DirectDebitFundingSource {
          id
          name
          paymentMandate {
            ... on SEPAPaymentDirectDebitMandate {
              id
              name
              statusInfo {
                ... on PaymentMandateConsentPendingStatusInfo {
                  __typename
                  consent {
                    consentUrl
                  }
                }
              }
              mandateDocumentUrl
            }
          }
        }
      }
    }
  }
}

```

## Payload {#payload}

Share the consentUrl (line 14) with your Swan account holder so they can consent to the operation.
After they consent to the payment mandate, the statuses for both the funding source and the direct debit mandate change to `Enabled` and you can pull money to fund the Swan account.

Note you also receive a funding source ID (line 6) and a payment mandate ID (line 9).

```json {6,9,14} showLineNumbers
{
  "data": {
    "addDirectDebitFundingSource": {
      "__typename": "AddDirectDebitFundingSourceSuccessPayload",
      "fundingSource": {
        "id": "$YOUR_FUNDING_SOURCE_ID",
        "name": "Awesome Funding Source Name",
        "paymentMandate": {
          "id": "$YOUR_PAYMENT_MANDATE_ID",
          "name": null,
          "statusInfo": {
            "__typename": "PaymentMandateConsentPendingStatusInfo",
            "consent": {
              "consentUrl": "https://identity.swan.io/consent?consentId=$CONSENT_ID&env=Sandbox"
            }
          },
          "mandateDocumentUrl": ""
        }
      }
    }
  }
}
```