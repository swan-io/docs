---
title: Sandbox
---

# Sandbox for Verification of Payee

Test VoP scenarios in Sandbox with specific IBANs that simulate different verification results.

:::warning Breaking Change
**Effective October 9, 2025:** The `beneficiaryVerification` query (Dutch IBANs only) is deprecated. Use the `verifySepaBeneficiary` mutation instead for all SEPA IBANs.
:::

## Test IBANs {#test-ibans}

Use these specific IBANs in Sandbox to test different VoP results:

| IBAN | Result | Description |
| --- | --- | --- |
| `FR7614508000300060632710243` | **Match** ✅ | Always returns Match for any name |
| `FR7630006000011234567890189` | **Close Match** ⚠️ | Returns Close Match for slight name variations |
| `DE89370400440532013000` | **No Match** ❌ | Returns No Match for incorrect names |
| `ES9121000418450200051332` | **Verification Not Possible** ⚠️ | Simulates technical failures |

## Test scenarios {#test-scenarios}

### Test Match result {#test-match}

Use the Match IBAN with any beneficiary name:

```graphql showLineNumbers
mutation TestMatch {
  verifySepaBeneficiary(
    input: {
      accountId: "$YOUR_SANDBOX_ACCOUNT_ID"
      payees: [
        {
          iban: "FR7614508000300060632710243"
          name: "Any Name Here"
          externalReference: "test-match"
        }
      ]
    }
  ) {
    ... on VerifySepaBeneficiarySuccessPayload {
      verifications {
        result {
          ... on BeneficiaryMatch {
            __typename
            verifiedName: name
          }
        }
        token
      }
    }
  }
}
```

### Test Close Match result {#test-close-match}

Use the Close Match IBAN with a slightly incorrect name:

```graphql showLineNumbers
mutation TestCloseMatch {
  verifySepaBeneficiary(
    input: {
      accountId: "$YOUR_SANDBOX_ACCOUNT_ID"
      payees: [
        {
          iban: "FR7630006000011234567890189"
          name: "Jon Smith"  # Will suggest "John Smith"
          externalReference: "test-close-match"
        }
      ]
    }
  ) {
    ... on VerifySepaBeneficiarySuccessPayload {
      verifications {
        result {
          ... on BeneficiaryCloseMatch {
            __typename
            suggestedName: nameSuggestion
            providedName: name
          }
        }
        token
      }
    }
  }
}
```

### Test No Match result {#test-no-match}

Use the No Match IBAN with any name:

```graphql showLineNumbers
mutation TestNoMatch {
  verifySepaBeneficiary(
    input: {
      accountId: "$YOUR_SANDBOX_ACCOUNT_ID"
      payees: [
        {
          iban: "DE89370400440532013000"
          name: "Wrong Name"
          externalReference: "test-no-match"
        }
      ]
    }
  ) {
    ... on VerifySepaBeneficiarySuccessPayload {
      verifications {
        result {
          ... on BeneficiaryMismatch {
            __typename
            providedName: name
          }
        }
        token
      }
    }
  }
}
```

### Test Verification Not Possible {#test-not-possible}

Use the technical failure IBAN:

```graphql showLineNumbers
mutation TestNotPossible {
  verifySepaBeneficiary(
    input: {
      accountId: "$YOUR_SANDBOX_ACCOUNT_ID"
      payees: [
        {
          iban: "ES9121000418450200051332"
          name: "Test User"
          externalReference: "test-not-possible"
        }
      ]
    }
  ) {
    ... on VerifySepaBeneficiarySuccessPayload {
      verifications {
        result {
          ... on BeneficiaryVerificationNotPossible {
            __typename
            reason
          }
        }
        token
      }
    }
  }
}
```

## Test VoP with credit transfers {#test-credit-transfers}

### Test automatic VoP (without token) {#test-automatic}

Test how VoP appears in the consent screen without pre-verification:

```graphql showLineNumbers
mutation TestAutomaticVoP {
  initiateCreditTransfers(
    input: {
      accountId: "$YOUR_SANDBOX_ACCOUNT_ID"
      consentRedirectUrl: "$YOUR_REDIRECT_URL"
      creditTransfers: {
        amount: { value: "50", currency: "EUR" }
        sepaBeneficiary: {
          iban: "FR7630006000011234567890189"
          name: "Jon Smith"  # Will show Close Match in consent
          isMyOwnIban: false
          save: false
        }
        mode: Regular
        reference: "Test automatic VoP"
      }
    }
  ) {
    ... on InitiateCreditTransfersSuccessPayload {
      payment {
        id
        statusInfo {
          ... on PaymentConsentPending {
            consent {
              consentUrl
            }
          }
        }
      }
    }
  }
}
```

### Test with verification token {#test-with-token}

Test using a pre-verification token:

```graphql showLineNumbers
mutation TestWithToken {
  initiateCreditTransfers(
    input: {
      accountId: "$YOUR_SANDBOX_ACCOUNT_ID"
      consentRedirectUrl: "$YOUR_REDIRECT_URL"
      creditTransfers: {
        amount: { value: "50", currency: "EUR" }
        sepaBeneficiary: {
          iban: "FR7614508000300060632710243"
          name: "Pre-verified User"
          isMyOwnIban: false
          save: false
        }
        beneficiaryVerificationToken: "$TOKEN_FROM_VERIFICATION"
        mode: Regular
        reference: "Test with token"
      }
    }
  ) {
    ... on InitiateCreditTransfersSuccessPayload {
      payment {
        id
        statusInfo {
          ... on PaymentConsentPending {
            consent {
              consentUrl
            }
          }
        }
      }
    }
    ... on BeneficiaryVerificationTokenAlreadyConsumedRejection {
      token
      message
    }
  }
}
```

## Test error scenarios {#test-errors}

### Test expired token {#test-expired-token}

Use an old or invalid token:

```graphql showLineNumbers
mutation TestExpiredToken {
  initiateCreditTransfers(
    input: {
      accountId: "$YOUR_SANDBOX_ACCOUNT_ID"
      consentRedirectUrl: "$YOUR_REDIRECT_URL"
      creditTransfers: {
        amount: { value: "50", currency: "EUR" }
        sepaBeneficiary: {
          iban: "FR7614508000300060632710243"
          name: "Test User"
          isMyOwnIban: false
          save: false
        }
        beneficiaryVerificationToken: "expired_or_invalid_token"
        mode: Regular
      }
    }
  ) {
    ... on InitiateCreditTransfersSuccessPayload {
      payment {
        id
      }
    }
    ... on ValidationRejection {
      message
    }
    ... on BeneficiaryVerificationTokenAlreadyConsumedRejection {
      token
      message
    }
  }
}
```

## Expected payloads {#expected-payloads}

### Match result payload {#payload-match}

```json showLineNumbers
{
  "data": {
    "verifySepaBeneficiary": {
      "__typename": "VerifySepaBeneficiarySuccessPayload",
      "verifications": [
        {
          "result": {
            "__typename": "BeneficiaryMatch",
            "verifiedName": "Any Name Here"
          },
          "token": "vt_sandbox_match_token_123"
        }
      ]
    }
  }
}
```

### Close Match result payload {#payload-close-match}

```json showLineNumbers
{
  "data": {
    "verifySepaBeneficiary": {
      "__typename": "VerifySepaBeneficiarySuccessPayload",
      "verifications": [
        {
          "result": {
            "__typename": "BeneficiaryCloseMatch",
            "suggestedName": "John Smith",
            "providedName": "Jon Smith"
          },
          "token": "vt_sandbox_close_match_token_456"
        }
      ]
    }
  }
}
```

### No Match result payload {#payload-no-match}

```json showLineNumbers
{
  "data": {
    "verifySepaBeneficiary": {
      "__typename": "VerifySepaBeneficiarySuccessPayload",
      "verifications": [
        {
          "result": {
            "__typename": "BeneficiaryMismatch",
            "providedName": "Wrong Name"
          },
          "token": "vt_sandbox_no_match_token_789"
        }
      ]
    }
  }
}
```

### Verification Not Possible payload {#payload-not-possible}

```json showLineNumbers
{
  "data": {
    "verifySepaBeneficiary": {
      "__typename": "VerifySepaBeneficiarySuccessPayload",
      "verifications": [
        {
          "result": {
            "__typename": "BeneficiaryVerificationNotPossible",
            "reason": "Technical timeout - verification service unavailable"
          },
          "token": "vt_sandbox_not_possible_token_abc"
        }
      ]
    }
  }
}
```

## Testing workflow {#testing-workflow}

1. **Start with individual verifications** - Test each VoP result type using the specific test IBANs
1. **Test credit transfer integration** - Use tokens with `initiateCreditTransfers`
1. **Test automatic VoP** - See how consent screens display VoP results
1. **Test error scenarios** - Verify proper error handling

:::tip Testing in Sandbox
All VoP functionality works in Sandbox exactly as it will in Live, except with simulated results. Use Sandbox to validate your integration before going live on October 9, 2025.
:::

## Related guides {#related}

- [Verify a beneficiary](./guide-verify-beneficiary.mdx) - Complete verification API guide
- [VoP with credit transfers](./guide-vop-credit-transfers.mdx) - Integration with transfers
- [VoP with standing orders](./guide-vop-standing-orders.mdx) - Standing order verification
- [SEPA Credit Transfers sandbox](../sepa/sandbox.mdx) - General credit transfer testing