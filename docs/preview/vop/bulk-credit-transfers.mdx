---
title: Bulk credit transfers with VoP
---

# Bulk credit transfers with VoP

Configure account-level verification settings to control VoP requirements for bulk credit transfers based on your business needs.

:::info Requirements
Bulk credit transfers require [Option 2: Custom verification](/preview/vop/verification-of-payee#option-2) using [the `verifyBeneficiary` mutation](/preview/vop/guide-verify-beneficiary). The default verification flow doesn't support bulk payments.
:::

## VoP requirements for bulk transfers {#bulk-requirements}

Swan applies different default VoP requirements based on account type to balance regulatory compliance with operational efficiency:

<FieldRequirementsLegend />

| Account type | Default token requirement | Can change setting |
| --- | :---: | :---: |
| **Company** | <Opt /> | <Yes /> |
| **Individual** | <Req /> | <No /> |

:::note Why these defaults?
Swan opts out company accounts by default to accelerate bulk file processing and reduce friction in high-volume business flows. Individual accounts remain opted in for enhanced consumer protection, and this setting cannot be changed. When multiple company accounts exist for the same account holder, all accounts are opted out by default regardless of any previous account settings.
:::

## Account-level verification settings {#account-settings}

Company account holders can modify their VoP requirements for bulk transfers through your application using [the `updateAccountSettings` mutation](#updating-settings). This provides the flexibility needed for different business use cases while maintaining compliance.

:::warning Integration requirement
You must implement [the `updateAccountSettings` mutation](#updating-settings) to ensure the best user experience and maintain compliance.

If not implemented, company end-users can request changes through support@swan.io. This fallback creates friction and delays, and is not recommended.
:::

### Setting requirements {#setting-requirements}

To modify VoP settings for bulk transfers, users must meet these requirements:

- **Account holder type**: Company accounts only.
- **User permissions**: Both `canViewAccount` and `canInitiatePayments`.
- **Account membership status**: Enabled.

### Consent requirements {#consent-requirements}

- **Opting in** (mandatory VoP): No consent required.
- **Opting out** (optional VoP): User consent required, subject to Strong Customer Authentication (SCA) for audit trail purposes.

## Impact on bulk transfer flows {#bulk-transfer-flows}

The account-level setting directly affects how bulk credit transfers are processed:

**Company account with VoP optional (opted out):**
- Bulk transfers can proceed without `beneficiaryVerificationToken`.
- [Option 2: Custom verification](/preview/vop/verification-of-payee#option-2) is recommended but not required.
- You have flexibility in implementation.

**Company account with VoP required (opted in):**
- All bulk transfers must include valid `beneficiaryVerificationToken` from `verifyBeneficiary` mutation.
- [Option 2: Custom verification](/preview/vop/verification-of-payee#option-2) is mandatory.
- Transfers without tokens will be rejected with `ForbiddenRejection`.

**Individual accounts:**
- VoP is always required for bulk transfers.
- Cannot be changed through settings.
- You must implement [Option 2: Custom verification](/preview/vop/verification-of-payee#option-2) to support individual bulk transfers.

:::tip Implementation guidance
**For companies opting in to VoP:** If you haven't implemented the `verifyBeneficiary` mutation, display a clear message to end-users explaining that enabling VoP verification will require additional steps in their transfer flow.
:::

## Updating account settings {#updating-settings}

Use the `updateAccountSettings` mutation to allow company account holders to modify their bulk transfer VoP requirements:

<a href="https://explorer.swan.io?query=bXV0YXRpb24gVXBkYXRlQWNjb3VudFNldHRpbmdzKCRpbnB1dDogVXBkYXRlQWNjb3VudFNldHRpbmdzSW5wdXQhKSB7CiAgdXBkYXRlQWNjb3VudFNldHRpbmdzKGlucHV0OiAkaW5wdXQpIHsKICAgIC4uLiBvbiBVcGRhdGVBY2NvdW50U2V0dGluZ3NTdWNjZXNzIHsKICAgICAgYWNjb3VudCB7CiAgICAgICAgc2V0dGluZ3MgewogICAgICAgICAgYWxsb3dCdWxrQ3JlZGl0VHJhbnNmZXJzV2l0aG91dEJlbmVmaWNpYXJ5VmVyaWZpY2F0aW9uCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAuLi4gb24gQWNjb3VudE5vdEZvdW5kUmVqZWN0aW9uIHsKICAgICAgbWVzc2FnZQogICAgfQogICAgLi4uIG9uIEZvcmJpZGRlblJlamVjdGlvbiB7CiAgICAgIG1lc3NhZ2UKICAgIH0KICAgIC4uLiBvbiBBY2NvdW50SG9sZGVyTm90Rm91bmRSZWplY3Rpb24gewogICAgICBtZXNzYWdlCiAgICB9CiAgfQp9Cg%3D%3D&tab=api" className="explorer-badge">Open in API Explorer</a>

```graphql {5}
mutation UpdateAccountSettings {
  updateAccountSettings(
    input: {
      accountId: "$YOUR_ACCOUNT_ID"
      allowBulkCreditTransfersWithoutBeneficiaryVerification: false
      consentRedirectUrl: "https://mycompany.com/consent"
    }
  ) {
    ... on UpdateAccountSettingsSuccess {
      account {
        settings {
          allowBulkCreditTransfersWithoutBeneficiaryVerification
        }
      }
    }
    ... on UpdateAccountSettingsConsentPending {
      __typename
      consent {
        consentUrl
      }
    }
    ... on AccountNotFoundRejection {
      message
    }
    ... on ForbiddenRejection {
      message
    }
    ... on AccountHolderNotFoundRejection {
      message
    }
  }
}
```

### Parameters {#parameters}

- **`accountId`**: The company account ID to update.
- **`allowBulkCreditTransfersWithoutBeneficiaryVerification`**: 
  - `true` = VoP optional for bulk transfers (opt out).
  - `false` = VoP required for bulk transfers (opt in).
- **`consentRedirectUrl`**: Required for the consent flow when opting out.

### Success response {#success-response}

For opt-in requests (no consent required):

```json title="Payload" {6}
{
  "data": {
    "updateAccountSettings": {
      "__typename": "UpdateAccountSettingsSuccess",
      "account": {
        "settings": {
          "allowBulkCreditTransfersWithoutBeneficiaryVerification": false
        }
      }
    }
  }
}
```

For opt-out requests (consent required):

```json title="Payload" {4-6}
{
  "data": {
    "updateAccountSettings": {
      "__typename": "UpdateAccountSettingsConsentPending",
      "consent": {
        "consentUrl": "https://identity.swan.io/consent?consentId=$YOUR_CONSENT_ID&env=Sandbox"
      }
    }
  }
}
```

### Error handling {#error-handling}

The mutation can return several rejection types:

| Rejection | Description |
| --- | --- |
| **AccountNotFoundRejection** | The provided account ID doesn't exist |
| **AccountHolderNotFoundRejection** | The account holder doesn't exist |
| **AccountHolderTypeNotEligibleRejection** | Only company account holders can modify this setting |
| **AccountMembershipNotEligibleRejection** | User lacks required permissions (`canViewAccount` + `canInitiatePayments`) |
| **AccountMembershipStatusNotEligibleRejection** | User's account membership must be **Enabled** |
| **ForbiddenRejection** | User not allowed or wrong context used |

## Sandbox testing {#sandbox-testing}

<FieldRequirementsLegend />

### Default sandbox and live requirements

| Account type | Token requirement for bulk transfers | BeneficiaryToken requirements |
| --- | --- | --- |
| **Company** | Optional (opted out) | <Opt /> |
| **Individual** | Required (opted in) | <Req /> |

Company accounts can modify their VoP requirements through the [account settings](#updating-settings), while individual accounts always require VoP for bulk transfers.

## Dispute protection {#dispute-protection}

Swan maintains a complete audit trail of VoP setting changes and verification history for each bulk credit transfer. If an end-user disputes that funds were transferred to the wrong beneficiary, this history provides essential evidence for liability determination.