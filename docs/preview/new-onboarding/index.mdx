---
title: Account onboarding enhancements
---

# Account onboarding enhancements

Redesigned onboarding mutations and queries with cleaner naming, typed responses, and consistent authentication patterns.

:::info Target availability
This API is in active development and will be available shortly.
:::

## Overview

We are introducing a redesigned onboarding API that replaces the existing mutations and queries. The new API provides improved developer experience through consistent naming conventions, structured input types, and typed responses.

### What's changing

| Aspect | Current API | New API |
|---|---|---|
| **Naming** | Mixed patterns (`onboardIndividualAccountHolder`, `unauthenticatedOnboardPublic...`) | Consistent pattern (`createIndividualAccountHolderOnboarding`, `createPublicIndividualAccountHolderOnboarding`) |
| **Input structure** | Flat input with all fields at root level | Nested structure with `accountInfo` and `accountAdmin` objects |
| **Response types** | Generic `Onboarding` type for all responses | Typed `IndividualAccountHolderOnboarding` and `CompanyAccountHolderOnboarding` |
| **Registry data** | Automatically populates empty onboarding fields | Dedicated query; no auto-population |
| **Authentication** | Implicit token requirements | Explicit `Public` prefix for unauthenticated endpoints |

### Authentication patterns

The new API uses a consistent pattern across all endpoints:

| Endpoint type | Token required | Use case |
|---|---|---|
| `Public` mutations and queries | None | End-user facing flows, public onboarding links |
| Standard mutations and queries | Project access token | Backend integrations, partner-initiated onboarding |
| `finalize` mutation | User access token | Completing onboarding after user identification |

## Individual onboarding

### Create an individual onboarding

Use `createIndividualAccountHolderOnboarding` with a project access token, or `createPublicIndividualAccountHolderOnboarding` without authentication.

| New mutation | Replaces |
|---|---|
| `createIndividualAccountHolderOnboarding` | `onboardIndividualAccountHolder` |
| `createPublicIndividualAccountHolderOnboarding` | `unauthenticatedOnboardPublicIndividualAccountHolder` |

#### Mutation

```graphql
mutation CreateIndividualOnboarding {
  createIndividualAccountHolderOnboarding(
    input: {
      accountInfo: {
        country: FRA
        name: "Personal account"
      }
      accountAdmin: {
        email: "malika.ngomao@mybrand.io"
        employmentStatus: Employee
        preferredLanguage: fr
        monthlyIncome: Between3000And4500
        address: {
          addressLine1: "123 avenue de Paris"
          city: "Paris"
          country: "FRA"
          postalCode: "75000"
        }
      }
    }
  ) {
    ... on CreateIndividualAccountHolderOnboardingSuccessPayload {
      __typename
      onboarding {
        id
        statusInfo {
          status
        }
      }
    }
    ... on ForbiddenRejection {
      __typename
      message
    }
    ... on ValidationRejection {
      __typename
      message
    }
  }
}
```

#### Payload

```json
{
  "data": {
    "createIndividualAccountHolderOnboarding": {
      "__typename": "CreateIndividualAccountHolderOnboardingSuccessPayload",
      "onboarding": {
        "id": "ae06faf6-13b2-4e9e-891b-e78ecd5ca0e4",
        "statusInfo": {
          "status": "Valid"
        }
      }
    }
  }
}
```

### Update an individual onboarding

Use `updateIndividualAccountHolderOnboarding` with a project access token, or `updatePublicIndividualAccountHolderOnboarding` without authentication.

| New mutation | Replaces |
|---|---|
| `updateIndividualAccountHolderOnboarding` | `updateIndividualOnboarding` |
| `updatePublicIndividualAccountHolderOnboarding` | `unauthenticatedUpdateIndividualOnboarding` |

## Company onboarding

### Create a company onboarding

Use `createCompanyAccountHolderOnboarding` with a project access token, or `createPublicCompanyAccountHolderOnboarding` without authentication.

| New mutation | Replaces |
|---|---|
| `createCompanyAccountHolderOnboarding` | `onboardCompanyAccountHolder` |
| `createPublicCompanyAccountHolderOnboarding` | `unauthenticatedOnboardPublicCompanyAccountHolder` |

### Update a company onboarding

Use `updateCompanyAccountHolderOnboarding` with a project access token, or `updatePublicCompanyAccountHolderOnboarding` without authentication.

| New mutation | Replaces |
|---|---|
| `updateCompanyAccountHolderOnboarding` | `updateCompanyOnboarding` |
| `updatePublicCompanyAccountHolderOnboarding` | `unauthenticatedUpdateCompanyOnboarding` |

## Finalize onboarding

The `finalizeAccountHolderOnboarding` mutation replaces `finalizeOnboarding`. It requires a **user access token** and returns an `AccountHolderOnboarding` union type.

| New mutation | Replaces |
|---|---|
| `finalizeAccountHolderOnboarding` | `finalizeOnboarding` |

## Queries

### Retrieve onboarding information

| New query | Authentication | Replaces |
|---|---|---|
| `publicAccountHolderOnboarding` | None | `onboardingInfo` |
| `accountHolderOnboarding` | Project access token | `onboarding` |
| `accountHolderOnboardings` | Project access token | `onboardings` |

All queries return the `AccountHolderOnboarding` union type, which resolves to either `IndividualAccountHolderOnboarding` or `CompanyAccountHolderOnboarding`.

### Company registry data

New dedicated queries retrieve company information from official registries. This replaces the previous behavior where empty onboarding fields were automatically populated with registry data.

| New query | Authentication |
|---|---|
| `publicCompanyInfoRegistryData` | None |
| `companyInfoRegistryData` | Project access token |

Both queries accept a company registration number and return a `CompanyInfo` type. Currently available for companies registered in **France** only.

:::caution Behavior change
The new API **does not** automatically populate onboarding fields with registry data. You must explicitly call `companyInfoRegistryData` or `publicCompanyInfoRegistryData` to retrieve registry information, then use that data when creating or updating the onboarding.
:::

## New types

### Input structure

The new API uses a nested input structure that separates account-level information from account admin (individual) information.

```graphql
input CreateIndividualAccountHolderOnboardingInput {
  accountInfo: IndividualAccountHolderOnboardingAccountInput!
  accountAdmin: IndividualAccountHolderOnboardingAccountAdminInput!
  oAuthRedirectParameters: OAuthRedirectParametersInput
}
```

For company onboardings, the input also includes company-specific fields.

### Response types

#### IndividualAccountHolderOnboarding

```graphql
type IndividualAccountHolderOnboarding implements AccountHolderOnboardingBase {
  id: String!
  statusInfo: StatusInfo!
  supportingDocumentCollection: SupportingDocumentCollection
  createdAt: DateTime!
  updatedAt: DateTime!
  accountInfo: IndividualAccountHolderOnboardingAccount
  accountAdmin: IndividualAccountHolderOnboardingAccountAdmin
}
```

#### CompanyAccountHolderOnboarding

```graphql
type CompanyAccountHolderOnboarding implements AccountHolderOnboardingBase {
  id: String!
  statusInfo: StatusInfo!
  supportingDocumentCollection: SupportingDocumentCollection
  createdAt: DateTime!
  updatedAt: DateTime!
  accountInfo: CompanyAccountHolderOnboardingAccount
  accountAdmin: CompanyAccountHolderOnboardingAccountAdmin
  company: CompanyInfo
}
```

#### AccountHolderOnboarding union

```graphql
union AccountHolderOnboarding = IndividualAccountHolderOnboarding | CompanyAccountHolderOnboarding
```